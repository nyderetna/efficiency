<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Efficiency</title>

		<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

		<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
	</head>
	<body>
		<div style="width: 100%">
			<canvas id="myChart"></canvas>
		</div>

		<script>
			function generateRandomData() {
				var data = [];
				for (var i = 0; i < 14; i++) {
					if (i < 7) {
						data.push(50 + Math.random() * 14);
					} else {
						data.push(65 + Math.random() * 35);
					}
				}
				return data;
			}

			function generateDateLabels() {
				var labels = [];
				var currentDate = new Date();
				for (var i = 0; i < 14; i++) {
					var date = new Date(currentDate.getTime() + i * 24 * 60 * 60 * 1000);
					var formattedDate =
						date.getDate() +
						" " +
						monthNames[date.getMonth()].substr(0, 3) +
						" " +
						(date.getFullYear() % 100);
					labels.push(formattedDate);
				}
				return labels;
			}

			var monthNames = [
				"Jan",
				"Feb",
				"Mar",
				"Apr",
				"May",
				"Jun",
				"Jul",
				"Aug",
				"Sep",
				"Oct",
				"Nov",
				"Dec",
			];

			var ctx = document.getElementById("myChart").getContext("2d");
			var myChart = new Chart(ctx, {
				type: "line",
				data: {
					labels: generateDateLabels(),
					datasets: [
						{
							label: "Target Efisiensi",
							data: Array(14).fill(65),
							borderColor: "rgba(60,44,123,255)",
							tension: 0.1,
							fill: false,
							backgroundColor: "white",
							pointStyle: "circle",
							pointRadius: 4,
						},
						{
							label: "Actual Efficiency",
							data: generateRandomData(),
							borderColor: "rgba(0,145,64,255)",
							tension: 0.1,
							fill: false,
							backgroundColor: "white",
							pointStyle: "circle",
							pointRadius: 4,
						},
					],
				},
				options: {
					scales: {
						y: {
							beginAtZero: true,
							suggestedMax: 100,
							ticks: {
								callback: function (value, index, values) {
									return value + "%";
								},
							},
						},
					},
					plugins: {
						title: {
							display: true,
							text: "Line Efficiency Performance by Factory",
							font: {
								size: 18,
							},
						},
						tooltip: {
							mode: "index",
							intersect: false,
							callbacks: {
								label: function (context) {
									var label = context.dataset.label || "";
									if (label) {
										label += ": ";
									}
									if (context.parsed.y !== null) {
										label += context.parsed.y.toFixed(2) + "%";
									}
									return label;
								},
							},
						},
					},
					animations: {
						radius: {
							duration: 400,
							easing: "linear",
							loop: (context) => context.active,
						},
					},
					hoverRadius: 5,
					hoverBackgroundColor: "grey",
					interaction: {
						mode: "nearest",
						intersect: false,
						axis: "x",
					},
				},
			});
		</script>
	</body>
</html>

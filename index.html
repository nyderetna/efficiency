<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Efficiency</title>
		<!-- Include Chart.js library -->
		<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
		<!-- Include Chart.js DataLabels plugin -->
		<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
	</head>
	<body>
		<div style="width: 100%">
			<canvas id="myChart"></canvas>
		</div>

		<script>
			// Generate random data for the second line
			function generateRandomData() {
				var data = [];
				for (var i = 0; i < 14; i++) {
					if (i < 7) {
						data.push(50 + Math.random() * 14); // Random value between 50 and 64 for the first week
					} else {
						data.push(65 + Math.random() * 35); // Random value between 75 and 110 for the second week
					}
				}
				return data;
			}

			// Generate date labels for the x-axis
			function generateDateLabels() {
				var labels = [];
				var currentDate = new Date();
				for (var i = 0; i < 14; i++) {
					var date = new Date(currentDate.getTime() + i * 24 * 60 * 60 * 1000);
					var formattedDate =
						date.getDate() +
						" " +
						monthNames[date.getMonth()].substr(0, 3) +
						" " +
						(date.getFullYear() % 100);
					labels.push(formattedDate);
				}
				return labels;
			}

			var monthNames = [
				"Jan",
				"Feb",
				"Mar",
				"Apr",
				"May",
				"Jun",
				"Jul",
				"Aug",
				"Sep",
				"Oct",
				"Nov",
				"Dec",
			];

			var ctx = document.getElementById("myChart").getContext("2d");
			var myChart = new Chart(ctx, {
				type: "line",
				data: {
					labels: generateDateLabels(), // Use the generated date labels
					datasets: [
						{
							label: "Target Efisiensi",
							data: Array(14).fill(65), // Static value of 65 for the first line
							borderColor: "rgba(60,44,123,255)",
							tension: 0.1,
						},
						{
							label: "Actual Efficiency",
							data: generateRandomData(), // Randomized data for the second line
							borderColor: "rgba(0,145,64,255)",
							tension: 0.1,
						},
					],
				},
				options: {
					scales: {
						y: {
							beginAtZero: true,
							suggestedMax: 100, // Set maximum value for y-axis
							ticks: {
								callback: function (value, index, values) {
									return value + "%"; // Append "%" to y-axis labels
								},
							},
						},
					},
					plugins: {
						datalabels: {
							display: true,
							color: "black",
							formatter: function (value, context) {
								return value + "%"; // Append "%" to the displayed label
							},
						},
					},
				},
			});
		</script>
	</body>
</html>
